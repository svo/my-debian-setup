- name: Install firewall
  ansible.builtin.apt:
    pkg: ufw
  become: true

- name: Install network bridge utils
  ansible.builtin.apt:
    pkg: bridge-utils
  become: true

- name: Install dnsmasq
  ansible.builtin.apt:
    pkg: dnsmasq
  become: true

- name: Install wireless tools
  ansible.builtin.apt:
    pkg: wireless-tools
  become: true

- name: Install graphical wireless scanner
  ansible.builtin.apt:
    pkg: linssid
  become: true

- name: Install avahi
  ansible.builtin.apt:
    pkg: avahi-daemon
  become: true

- name: Install k4dirstat disk Usage utility
  ansible.builtin.apt:
    pkg: k4dirstat
  become: true

- name: Install Kupfer launcher
  ansible.builtin.apt:
    pkg: kupfer
  become: true

- name: Install apt file
  ansible.builtin.apt:
    pkg: apt-file
  become: true

- name: Install duplicity for backup
  ansible.builtin.apt:
    pkg: duplicity
    update_cache: true
  become: true

- name: Install Déjà Dup for backup
  ansible.builtin.apt:
    pkg: deja-dup
  become: true

- name: Install NFS
  ansible.builtin.apt:
    pkg: nfs-kernel-server
  become: true

- name: Install ntfs-3g for NTFS filesystem support
  ansible.builtin.apt:
    pkg: ntfs-3g
  become: true

- name: Install gpart/ed partition
  ansible.builtin.apt:
    pkg: gpart,gparted
  become: true

- name: Install ddrescue
  ansible.builtin.apt:
    pkg: gddrescue
  become: true

- name: Install testdisk
  ansible.builtin.apt:
    pkg: testdisk
  become: true

- name: Install safecopy
  ansible.builtin.apt:
    pkg: safecopy
  become: true

- name: Install foremost to recover lost files
  ansible.builtin.apt:
    pkg: foremost
  become: true

- name: Install xclip clipboard utility
  ansible.builtin.apt:
    pkg: xclip
  become: true

- name: Add pbcopy/pbpaste alias to bashrc
  ansible.builtin.lineinfile:
    dest: ~/.bashrc
    line: "{{ item }}"
  with_items:
    - alias pbcopy='xclip -selection clipboard'
    - alias pbpaste='xclip -selection clipboard -o'

- name: Install CopyQ clipboard manager
  ansible.builtin.apt:
    pkg: copyq
  become: true

- name: Download topgrade installation resource
  ansible.builtin.get_url:
    url: https://github.com/r-darwish/topgrade/releases/download/v8.2.0/topgrade-v8.2.0-x86_64-unknown-linux-gnu.tar.gz
    dest: ~/Installs/topgrade-v8.2.0-x86_64-unknown-linux-gnu.tar.gz
    checksum: sha256:5d2588260673d93355744a974f85cff8cb9eceb60fff45e26f625130f051151c

- name: Unarchive topgrade
  ansible.builtin.unarchive:
    src: ~/Installs/topgrade-v8.2.0-x86_64-unknown-linux-gnu.tar.gz
    remote_src: true
    dest: /tmp

- name: Install topgrade
  ansible.builtin.copy:
    src: /tmp/topgrade
    dest: /usr/local/bin
    remote_src: true
    mode: '0755'
  become: true

- name: Install Cryptmount for encrypted filesystems
  ansible.builtin.apt:
    pkg: cryptmount
  become: true

- name: Install bluetooth support
  ansible.builtin.apt:
    pkg: bluez,blueman
  become: true

- name: Install world clock
  ansible.builtin.apt:
    pkg: gnome-clocks
  become: true
