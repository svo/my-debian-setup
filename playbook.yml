---
- name: Debian setup playbook
  hosts: all

  pre_tasks:

    - name: Create Installs directories
      ansible.builtin.file:
        path: ~/Installs
        state: directory
        mode: '0755'

    - name: Symlink ~/Installs
      ansible.builtin.file:
        src: ~/Installs
        dest: /tmp/Installs
        state: link

    - name: Install required packages
      ansible.builtin.apt:
        name:
          - apt-transport-https
          - ca-certificates
          - curl
          - unzip
      become: true

  roles:
    - ssh
    - python
    - source-control
    - vim
    - system
    - security
    - cli-tools
    - infrastructure-as-code
    - media
    - clojure
    - nodejs
    - ruby
    - internet
    - docker
    - office
    - golang
    - act
    - nginx

  post_tasks:

    - name: Add docker group for user
      ansible.builtin.user:
        name: "{{ ansible_user_id }}"
        groups: docker
        append: true
      become: true
